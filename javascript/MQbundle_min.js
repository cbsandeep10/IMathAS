(function(){function e(){}function b(a){var b=P.call(arguments,1);return function(){return a.apply(this,b)}}function u(a,b){if(!b)throw Error("prayer failed: "+a);}function w(a){u("a direction was passed",-1===a||1===a)}function H(a,b,h,f){function F(){l=U;var a=v.selection?"$"+v.selection.latex()+"$":"";q.select(a)}var X=a.contents().detach();h||a.addClass("mathquill-rendered-math");b.jQ=a.attr("mathquill-block-id",b.id);b.revert=function(){a.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(X)};
var v=b.cursor=ha(b);b.renderLatex(X.text());if(navigator.userAgent.match("Android"))var k=b.textarea=x('<span class="textarea"><input type="password"/></span>'),g=k.children();else k=b.textarea=x('<span class="textarea"><textarea></textarea></span>'),g=k.children();var l;b.selectionChanged=function(){l===U&&(l=setTimeout(F));ea(a[0])};a.bind("selectstart.mathquill",function(a){a.target!==g[0]&&a.preventDefault();a.stopPropagation()});var m,r=v.blink;a.bind("mousedown.mathquill",function(h){function b(a){v.seek(x(a.target),
a.pageX,a.pageY);v[-1]===m[-1]&&v.parent===m.parent||v.selectFrom(m);return!1}function F(a){delete a.target;return b(a)}function K(h){m=U;v.blink=r;v.selection||(f?v.show():k.detach());a.unbind("mousemove",b);x(h.target.ownerDocument).unbind("mousemove",F).unbind("mouseup",K)}setTimeout(function(){document.activeElement!=g[0]&&g.focus()});v.blink=e;v.seek(x(h.target),h.pageX,h.pageY);m=n(v.parent,v[-1],v[1]);f||a.prepend(k);a.mousemove(b);x(h.target.ownerDocument).mousemove(F).mouseup(K);return!1});
if(f)q=L(g,{container:a,key:function(a,h){v.parent.bubble("onKey",a,h)},text:function(a){v.parent.bubble("onText",a)},cut:function(a){v.selection&&setTimeout(function(){v.prepareEdit();v.parent.bubble("redraw")});a.stopPropagation()},paste:function(a){a="$"===a.slice(0,1)&&"$"===a.slice(-1)?a.slice(1,-1):"\\text{"+a+"}";v.writeLatex(a).show()}}),a.prepend(k),a.addClass("mathquill-editable"),h&&a.addClass("mathquill-textbox"),g.focus(function(a){v.parent||v.insAtRightEnd(b);v.parent.jQ.addClass("hasCursor");
v.selection?(v.selection.jQ.removeClass("blur"),setTimeout(b.selectionChanged)):v.show();a.stopPropagation()}).blur(function(a){v.hide().parent.blur();v.selection&&v.selection.jQ.addClass("blur");a.stopPropagation()}),a.bind("focus.mathquill blur.mathquill",function(a){g.trigger(a)}).bind("click.mathquill",function(a){document.activeElement!=g[0]&&g.focus()}).blur();else{var u=function(){k.detach()},q=L(g,{container:a});a.bind("cut paste",!1).bind("copy",F).prepend('<span class="selectable">$'+b.latex()+
"$</span>");g.blur(function(){v.clearSelection();setTimeout(u)})}}function M(a,b,h){return q(Y,{ctrlSeq:a,htmlTemplate:"<"+b+" "+h+">&0</"+b+">"})}var B=window.jQuery,U,Q=Math.min,P=[].slice,G=navigator.userAgent.match("Android"),q=function(a,b,h){function f(a){return"function"===typeof a}function F(){}function e(v,n){function k(){var a=new g;f(a.init)&&a.init.apply(a,arguments);return a}function g(){}n===h&&(n=v,v=Object);k.Bare=g;var l=F[a]=v[a],m=g[a]=k[a]=new F,r;m.constructor=k;k.mixin=function(h){g[a]=
k[a]=e(k,h)[a];return k};return(k.open=function(a){r={};f(a)?r=a.call(k,m,l,k,v):"object"===typeof a&&(r=a);if("object"===typeof r)for(var h in r)b.call(r,h)&&(m[h]=r[h]);f(m.init)||(m.init=v);return k})(n)}return e}("prototype",{}.hasOwnProperty),L=function(){function a(h){var f=h.which||h.keyCode,t=b[f],e=[];h.ctrlKey&&e.push("Ctrl");h.originalEvent&&h.originalEvent.metaKey&&e.push("Meta");h.altKey&&e.push("Alt");h.shiftKey&&e.push("Shift");h=t||String.fromCharCode(f);if(!e.length&&!t)return h;
e.push(h);return e.join("-")}var b={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(h,f){function b(a){var h=B.trim(q.val());q.val(" ");h&&a(h)}function n(h){K&&(g||G)&&m(a(K),K);g=h;w=h=v;clearTimeout(z);z=setTimeout(h)}function v(){var a=q[0];("selectionStart"in a?a.selectionStart!==a.selectionEnd:
document.selection&&"Text"===document.selection.type&&document.selection.createRange&&document.selection.createRange().parentElement()===q[0])||b(l)}function k(){b(r)}var K=null,g=null;f||(f={});var l=f.text||e,m=f.key||e,r=f.paste||e,u=f.cut||e,q=B(h),y=B(f.container||q),w=e,z;y.bind("keydown keypress input keyup focusout paste",function(){w()});y.bind({keydown:function(h){K=h;g=null;G?n():m(a(K),K)},keypress:n,focusout:function(){K=g=null},cut:u,paste:function(a){q.focus();w=k;clearTimeout(z);z=
setTimeout(k)}});return{select:function(a){w();w=e;clearTimeout(z);q.val(a);a&&q[0].select()}}}}(),E=q(function(a,b,h){function f(a,h){throw"Parse Error: "+h+" at "+(a?"'"+a+"'":"EOF");}a.init=function(a){this._=a};a.parse=function(a){return this.skip(e)._(a,function(a,h){return h},f)};a.or=function(a){u("or is passed a parser",a instanceof h);var f=this;return h(function(h,b,t){return f._(h,b,function(f){return a._(h,b,t)})})};a.then=function(a){var f=this;return h(function(b,t,F){return f._(b,function(f,
b){var e=a instanceof h?a:a(b);u("a parser is returned",e instanceof h);return e._(f,t,F)},F)})};a.many=function(){var a=this;return h(function(h,f,b){function t(a,f){h=a;e.push(f);return!0}function F(){return!1}for(var e=[];a._(h,t,F););return f(h,e)})};a.times=function(a,f){2>arguments.length&&(f=a);var b=this;return h(function(h,t,F){function e(a,f){K.push(f);h=a;return!0}function n(a,f){X=f;h=a;return!1}function k(a,h){return!1}for(var K=[],g=!0,X,l=0;l<a;l+=1)if(g=b._(h,e,n),!g)return F(h,X);
for(;l<f&&g;l+=1)g=b._(h,e,k);return t(h,K)})};a.result=function(a){return this.then(F(a))};a.atMost=function(a){return this.times(0,a)};a.atLeast=function(a){var h=this;return h.times(a).then(function(a){return h.many().map(function(h){return a.concat(h)})})};a.map=function(a){return this.then(function(h){return F(a(h))})};a.skip=function(a){return this.then(function(h){return a.result(h)})};this.string=function(a){var f=a.length,b="expected '"+a+"'";return h(function(h,t,F){var e=h.slice(0,f);return e===
a?t(h.slice(f),e):F(h,b)})};a=this.regex=function(a){u("regexp parser is anchored","^"===a.toString().charAt(1));var f="expected "+a;return h(function(h,b,t){var F=a.exec(h);return F?(t=F[0],b(h.slice(t.length),t)):t(h,f)})};var F=h.succeed=function(a){return h(function(h,f){return f(h,a)})};h.fail=function(a){return h(function(h,f,b){return b(h,a)})};h.letter=a(/^[a-z]/i);h.letters=a(/^[a-z]*/i);h.digit=a(/^[0-9]/);h.digits=a(/^[0-9]*/);h.whitespace=a(/^\s+/);h.optWhitespace=a(/^\s*/);h.any=h(function(a,
h,f){return a?h(a.slice(1),a.charAt(0)):f(a,"expected any character")});h.all=h(function(a,h,f){return h("",a)});var e=h.eof=h(function(a,h,f){return a?f(a,"expected EOF"):h(a,a)})}),x=q(B,function(a){a.insDirOf=function(a,h){return-1===a?this.insertBefore(h.first()):this.insertAfter(h.last())};a.insAtDirEnd=function(a,h){return-1===a?this.prependTo(h):this.appendTo(h)}}),n=q(function(a){a.parent=0;a[-1]=0;a[1]=0;a.init=function(a,h,f){this.parent=a;this[-1]=h;this[1]=f}}),k=q(function(a){a[-1]=0;
a[1]=0;a.parent=0;a.init=function(){this.ends={};this.ends[-1]=0;this.ends[1]=0};a.children=function(){return m(this.ends[-1],this.ends[1])};a.eachChild=function(a){return this.children().each(a)};a.foldChildren=function(a,h){return this.children().fold(a,h)};a.adopt=function(a,h,f){m(this,this).adopt(a,h,f);return this};a.disown=function(){m(this,this).disown();return this}}),m=q(function(a){function b(a,f,t){u("a parent is always present",a);var e;e=f?f[1]===t&&f.parent===a:a.ends[-1]===t;u("leftward is properly set up",
e);a=t?t[-1]===f&&t.parent===a:a.ends[1]===f;u("rightward is properly set up",a)}a.init=function(a,f){u("no half-empty fragments",!a===!f);this.ends={};a&&(u("left end node is passed to Fragment",a instanceof k),u("right end node is passed to Fragment",f instanceof k),u("leftEnd and rightEnd have the same parent",a.parent===f.parent),this.ends[-1]=a,this.ends[1]=f)};a.adopt=function(a,f,t){b(a,f,t);this.disowned=!1;var e=this.ends[-1];if(!e)return this;var v=this.ends[1];f||(a.ends[-1]=e);t?t[-1]=
v:a.ends[1]=v;this.ends[1][1]=t;this.each(function(b){b[-1]=f;b.parent=a;f&&(f[1]=b);f=b});return this};a.disown=function(){var a=this.ends[-1];if(!a||this.disowned)return this;this.disowned=!0;var f=this.ends[1],t=a.parent;b(t,a[-1],a);b(t,f,f[1]);a[-1]?a[-1][1]=f[1]:t.ends[-1]=f[1];f[1]?f[1][-1]=a[-1]:t.ends[1]=a[-1];return this};a.each=function(a){var f=this.ends[-1];if(!f)return this;for(;f!==this.ends[1][1]&&!1!==a.call(this,f);f=f[1]);return this};a.fold=function(a,f){this.each(function(b){a=
f.call(this,a,b)});return a}}),l=function(){var a=0;return function(){return a+=1}}(),r=q(k,function(a,b){a.init=function(a){b.init.call(this);this.id=l();r[this.id]=this};a.toString=function(){return"[MathElement "+this.id+"]"};a.bubble=function(a){for(var f=P.call(arguments,1),b=this;b&&!1!==(b[a]&&b[a].apply(b,f));b=b.parent);return this};a.postOrder=function(a){var f=P.call(arguments,1);if("string"===typeof a){var b=a;a=function(a){b in a&&a[b].apply(a,f)}}(function v(f){f.eachChild(v);a(f)})(this)};
a.jQ=x();a.jQadd=function(a){this.jQ=this.jQ.add(a)};this.jQize=function(a){a=x(a);a.find("*").andSelf().each(function(){var a=x(this),h=a.attr("mathquill-command-id"),b=a.attr("mathquill-block-id");h&&r[h].jQadd(a);b&&r[b].jQadd(a)});return a};a.finalizeInsert=function(){this.postOrder("finalizeTree");this.postOrder("blur");this.postOrder("respace");this[1].respace&&this[1].respace();this[-1].respace&&this[-1].respace();this.postOrder("redraw");this.bubble("redraw")}}),I=q(r,function(a,b){a.init=
function(a,f,t){b.init.call(this);this.ctrlSeq||(this.ctrlSeq=a);f&&(this.htmlTemplate=f);t&&(this.textTemplate=t)};a.replaces=function(a){a.disown();this.replacedFragment=a};a.isEmpty=function(){return this.foldChildren(!0,function(a,f){return a&&f.isEmpty()})};a.parser=function(){var a=this;return R.block.times(a.numBlocks()).map(function(f){a.blocks=f;for(var b=0;b<f.length;b+=1)f[b].adopt(a,a.ends[1],0);return a})};a.createLeftOf=function(a){var f=this.replacedFragment;this.createBlocks();r.jQize(this.html());
f&&(f.adopt(this.ends[-1],0,0),f.jQ.appendTo(this.ends[-1].jQ));a.jQ.before(this.jQ);a[-1]=this.adopt(a.parent,a[-1],a[1]);this.finalizeInsert(a);this.placeCursor(a)};a.createBlocks=function(){for(var a=this.numBlocks(),f=this.blocks=Array(a),b=0;b<a;b+=1)(f[b]=C()).adopt(this,this.ends[1],0)};a.respace=e;a.placeCursor=function(a){a.insAtRightEnd(this.foldChildren(this.ends[-1],function(a,h){return a.isEmpty()?a:h}))};a.remove=function(){this.disown();this.jQ.remove();this.postOrder(function(a){delete r[a.id]});
return this};a.numBlocks=function(){var a=this.htmlTemplate.match(/&\d+/g);return a?a.length:0};a.html=function(){var a=this.blocks,f=" mathquill-command-id="+this.id,b=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);u("no unmatched angle brackets",b.join("")===this.htmlTemplate);for(var t=0,e=b[0];e;t+=1,e=b[t])if("/>"===e.slice(-2))b[t]=e.slice(0,-2)+f+"/>";else if("<"===e.charAt(0)){u("not an unmatched top-level close tag","/"!==e.charAt(1));b[t]=e.slice(0,-1)+f+">";var n=1;do t+=1,e=b[t],u("no missing close tags",
e),"</"===e.slice(0,2)?--n:"<"===e.charAt(0)&&"/>"!==e.slice(-2)&&(n+=1);while(0<n)}return b.join("").replace(/>&(\d+)/g,function(f,b){return" mathquill-block-id="+a[b].id+">"+a[b].join("html")})};a.latex=function(){return this.foldChildren(this.ctrlSeq,function(a,f){return a+"{"+(f.latex()||" ")+"}"})};a.textTemplate=[""];a.text=function(){var a=0;return this.foldChildren(this.textTemplate[a],function(f,b){a+=1;var t=b.text();return f&&"("===this.textTemplate[a]&&"("===t[0]&&")"===t.slice(-1)?f+
t.slice(1,-1)+this.textTemplate[a]:f+b.text()+(this.textTemplate[a]||"")})}}),O=q(I,function(a,b){a.init=function(a,f,t){t||(t=a&&1<a.length?a.slice(1):a);b.init.call(this,a,f,[t])};a.parser=function(){return E.succeed(this)};a.numBlocks=function(){return 0};a.replaces=function(a){a.remove()};a.createBlocks=e;a.latex=function(){return this.ctrlSeq};a.text=function(){return this.textTemplate};a.placeCursor=e;a.isEmpty=function(){return!0}}),C=q(r,function(b){b.join=function(a){return this.foldChildren("",
function(h,f){return h+f[a]()})};b.latex=function(){return this.join("latex")};b.text=function(){return this.ends[-1]===this.ends[1]?this.ends[-1].text():"("+this.join("text")+")"};b.isEmpty=function(){return 0===this.ends[-1]&&0===this.ends[1]};b.write=function(b,h,f){var t;t=h.match(/^[a-eg-zA-Z]$/)?J(h):(t=D[h]||a[h])?t(h):g(h);f&&t.replaces(f);t.createLeftOf(b)};b.focus=function(){this.jQ.addClass("hasCursor");this.jQ.removeClass("empty");return this};b.blur=function(){this.jQ.removeClass("hasCursor");
this.isEmpty()&&this.jQ.addClass("empty");return this}}),Z=q(m,function(a,b){a.init=function(a,f){b.init.call(this,a,f||a);this.jQ=this.fold(x(),function(a,f){return f.jQ.add(a)})};a.latex=function(){return this.fold("",function(a,f){return a+f.latex()})};a.remove=function(){this.jQ.remove();this.each(function(a){a.postOrder(function(a){delete r[a.id]})});return this.disown()}}),A=q(C,function(a,b){a.latex=function(){return b.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};a.text=function(){return this.foldChildren("",
function(a,f){return a+f.text()})};a.renderLatex=function(a){this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete this.cursor.selection;this.cursor.insAtRightEnd(this).writeLatex(a)};a.onKey=function(a,f){switch(a){case "Ctrl-Shift-Backspace":case "Ctrl-Backspace":for(;this.cursor[-1]||this.cursor.selection;)this.cursor.backspace();break;case "Shift-Backspace":case "Backspace":this.cursor.backspace();break;case "Esc":case "Tab":case "Spacebar":var b=this.cursor.parent;if(b===this.cursor.root){"Spacebar"===
a&&f.preventDefault();return}this.cursor.prepareMove();b[1]?this.cursor.insAtLeftEnd(b[1]):this.cursor.insRightOf(b.parent);break;case "Shift-Tab":case "Shift-Esc":case "Shift-Spacebar":b=this.cursor.parent;if(b===this.cursor.root){"Shift-Spacebar"===a&&f.preventDefault();return}this.cursor.prepareMove();b[-1]?this.cursor.insAtRightEnd(b[-1]):this.cursor.insLeftOf(b.parent);break;case "Enter":"function"===typeof savemathquill&&savemathquill();break;case "End":this.cursor.prepareMove().insAtRightEnd(this.cursor.parent);
break;case "Ctrl-End":this.cursor.prepareMove().insAtRightEnd(this);break;case "Shift-End":for(;this.cursor[1];)this.cursor.selectRight();break;case "Ctrl-Shift-End":for(;this.cursor[1]||this.cursor.parent!==this;)this.cursor.selectRight();break;case "Home":this.cursor.prepareMove().insAtLeftEnd(this.cursor.parent);break;case "Ctrl-Home":this.cursor.prepareMove().insAtLeftEnd(this);break;case "Shift-Home":for(;this.cursor[-1];)this.cursor.selectLeft();break;case "Ctrl-Shift-Home":for(;this.cursor[-1]||
this.cursor.parent!==this;)this.cursor.selectLeft();break;case "Left":this.cursor.moveLeft();break;case "Shift-Left":this.cursor.selectLeft();break;case "Ctrl-Left":break;case "Right":this.cursor.moveRight();break;case "Shift-Right":this.cursor.selectRight();break;case "Ctrl-Right":break;case "Up":this.cursor.moveUp();break;case "Down":this.cursor.moveDown();break;case "Shift-Up":if(this.cursor[-1])for(;this.cursor[-1];)this.cursor.selectLeft();else this.cursor.selectLeft();case "Shift-Down":if(this.cursor[1])for(;this.cursor[1];)this.cursor.selectRight();
else this.cursor.selectRight();case "Ctrl-Up":break;case "Ctrl-Down":break;case "Ctrl-Shift-Del":case "Ctrl-Del":for(;this.cursor[1]||this.cursor.selection;)this.cursor.deleteForward();break;case "Shift-Del":case "Del":this.cursor.deleteForward();break;case "Meta-A":case "Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().insAtRightEnd(this);this.cursor[-1];)this.cursor.selectLeft();break;default:return!1}f.preventDefault();return!1};a.onText=function(a){this.cursor.write(a);
return!1}}),ba=q(I,function(a,b){a.init=function(a){b.init.call(this,"$");this.cursor=a};a.htmlTemplate='<span class="mathquill-rendered-math">&0</span>';a.createBlocks=function(){this.ends[-1]=this.ends[1]=A();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;this.ends[-1].cursor=this.cursor;this.ends[-1].write=function(a,f,b){"$"!==f?C.prototype.write.call(this,a,f,b):this.isEmpty()?(a.insRightOf(this.parent).backspace().show(),g("\\$","$").createLeftOf(a)):a[1]?a[-1]?C.prototype.write.call(this,
a,f,b):a.insLeftOf(this.parent):a.insRightOf(this.parent)}};a.latex=function(){return"$"+this.ends[-1].latex()+"$"}}),ja=q(C,function(a){a.renderLatex=function(a){var b=this.cursor;this.jQ.children().slice(1).remove();this.ends[-1]=this.ends[1]=0;delete b.selection;b.show().insAtRightEnd(this);var f=E.regex,t=E.string,e=E.eof,v=E.all,n=t("$").then(R).skip(t("$").or(e)).map(function(a){var f=ba(b);f.createBlocks();var t=f.ends[-1];a.children().adopt(t,0,0);return f}),f=t("\\$").result("$").or(f(/^[^$]/)).map(g);
if(a=n.or(f).many().skip(e).or(v.result(!1)).parse(a)){for(e=0;e<a.length;e+=1)a[e].adopt(this,this.ends[1],0);a=this.join("html");r.jQize(a).appendTo(this.jQ);this.finalizeInsert()}};a.onKey=function(a){"Spacebar"!==a&&"Shift-Spacebar"!==a&&A.prototype.onKey.apply(this,arguments)};a.onText=A.prototype.onText;a.write=function(a,b,f){f&&f.remove();if("$"===b)ba(a).createLeftOf(a);else{var t;"<"===b?t="&lt;":">"===b&&(t="&gt;");g(b,t).createLeftOf(a)}}}),D={},a={},V,ea=e,z=document.createElement("div").style,
S={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},ca,da;for(da in S)if(da in z){ca=da;break}ca?V=function(a,b,h){a.css(ca,"scale("+b+","+h+")")}:"filter"in z?(ea=function(a){a.className=a.className},V=function(a,b,h){function f(){a.css("marginRight",(1+a.width())*(b-1)/b+"px")}b/=1+(h-1)/2;a.addClass("matrixed").css({fontSize:h+.05+"em",marginTop:"-.05em",filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+b+",SizingMethod='auto expand')"});f();var e=setInterval(f);x(window).load(function(){clearTimeout(e);
f()})}):V=function(a,b,h){a.css("fontSize",h+"em")};z=q(I,function(a,b){a.init=function(a,f,t){b.init.call(this,a,"<"+f+" "+t+">&0</"+f+">")}});a.mathrm=b(z,"\\mathrm","span",'class="roman font"');a.mathit=b(z,"\\mathit","i",'class="font"');a.mathbf=b(z,"\\mathbf","b",'class="font"');a.mathsf=b(z,"\\mathsf","span",'class="sans-serif font"');a.mathtt=b(z,"\\mathtt","span",'class="monospace font"');a.underline=b(z,"\\underline","span",'class="non-leaf underline"');a.overline=a.bar=b(z,"\\overline",
"span",'class="non-leaf overline"');var N=q(I,function(a,b){a.init=function(a,f,e){b.init.call(this,a,"<"+f+' class="non-leaf">&0</'+f+">",[e])};a.finalizeTree=function(){function a(f){var b=this.parent,h=f;do{if(h[1])return f.insLeftOf(b),!1;h=h.parent.parent}while(h!==b);f.insRightOf(b);return!1}u("SupSub is only _ and ^","^"===this.ctrlSeq||"_"===this.ctrlSeq);"_"===this.ctrlSeq?(this.down=this.ends[-1],this.ends[-1].up=a):(this.up=this.ends[-1],this.ends[-1].down=a)};a.latex=function(){var a=
this.ends[-1].latex();return 1===a.length?this.ctrlSeq+a:this.ctrlSeq+"{"+(a||" ")+"}"};a.redraw=function(){this[-1]&&this[-1].respace();this[-1]instanceof N||(this.respace(),!this[1]||this[1]instanceof N||this[1].respace())};a.respace=function(){"\\int "===this[-1].ctrlSeq||this[-1]instanceof N&&this[-1].ctrlSeq!=this.ctrlSeq&&this[-1][-1]&&"\\int "===this[-1][-1].ctrlSeq?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit"));if(this.respaced=
this[-1]instanceof N&&this[-1].ctrlSeq!=this.ctrlSeq&&!this[-1].respaced){var a=+this.jQ.css("fontSize").slice(0,-2),f=this[-1].jQ.outerWidth(),b=this.jQ.outerWidth();this.jQ.css({left:(this.limit&&"_"===this.ctrlSeq?-.25:0)-f/a+"em",marginRight:.1-Q(b,f)/a+"em"})}else this.limit&&"_"===this.ctrlSeq?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});this[1]instanceof N&&this[1].respace();return this}});a.subscript=a._=b(N,"_","sub","_");a.superscript=a.supscript=a["^"]=
b(N,"^","sup","**");var z=a.frac=a.dfrac=a.cfrac=a.fraction=q(I,function(a,b){a.ctrlSeq="\\frac";a.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0</span><span class="denominator">&1</span><span style="display:inline-block;width:0">&nbsp;</span></span>';a.textTemplate=["(","/",")"];a.finalizeTree=function(){this.up=this.ends[1].up=this.ends[-1];this.down=this.ends[-1].down=this.ends[1]};a.redraw=function(){if(B.browser.msie&&7>=parseInt(B.browser.version,10)){var a=this.jQ,
f=a.children(".numerator"),a=a.children(".denominator"),b;f.css("width","auto");a.css("width","auto");b=Math.max(f.width(),a.width());f.css("width",b+"px");a.css("width",b+"px")}}}),ka=a.over=D["/"]=q(z,function(a,b){a.createLeftOf=function(a){if(!this.replacedFragment){for(var f=a[-1];f&&!(f instanceof y||f instanceof Y||f instanceof W||-1<",;:".indexOf(f.ctrlSeq));)f=f[-1];f instanceof W&&f[1]instanceof N&&(f=f[1],f[1]instanceof N&&f[1].ctrlSeq!=f.ctrlSeq&&(f=f[1]));f!==a[-1]&&(this.replaces(Z(f[1]||
a.parent.ends[-1],a[-1])),a[-1]=f)}b.createLeftOf.call(this,a)}}),z=a.sqrt=a["\u00e2\u02c6\u0161"]=q(I,function(a,b){a.ctrlSeq="\\sqrt";a.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;</span><span class="non-leaf sqrt-stem">&0</span></span>';a.textTemplate=["sqrt(",")"];a.parser=function(){return R.optBlock.then(function(a){return R.block.map(function(b){var e=la();e.blocks=[a,b];a.adopt(e,0,0);b.adopt(e,a,0);return e})}).or(b.parser.call(this))};a.redraw=function(){var a=
this.ends[1].jQ;V(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)}});a.vec=q(I,function(a,b){a.ctrlSeq="\\vec";a.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;</span><span class="vector-stem">&0</span></span>';a.textTemplate=["vec(",")"]});var la=a.nthroot=q(z,function(a,b){a.htmlTemplate='<sup class="nthroot non-leaf">&0</sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;</span><span class="sqrt-stem non-leaf">&1</span></span>';a.textTemplate=
["sqrt[","](",")"];a.latex=function(){return"\\sqrt["+this.ends[-1].latex()+"]{"+this.ends[1].latex()+"}"}}),T=q(I,function(a,b){a.init=function(a,f,e,t){b.init.call(this,"\\left"+e,'<span class="non-leaf"><span class="scaled paren">'+a+'</span><span class="non-leaf">&0</span><span class="scaled paren">'+f+"</span></span>",[a,f]);this.end="\\right"+t};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.jQ;this.bracketjQs=a.children(":first").add(a.children(":last"))};a.latex=function(){return this.ctrlSeq+
this.ends[-1].latex()+this.end};a.redraw=function(){var a=this.ends[-1].jQ,a=a.outerHeight()/+a.css("fontSize").slice(0,-2);V(this.bracketjQs,Q(1+.2*(a-1),1.2),1.05*a)}});a.left=q(I,function(a){a.parser=function(){var a=E.regex,b=E.string,f=E.succeed,e=E.optWhitespace;return e.then(a(/^(?:[([|]|\\\{)/)).then(function(t){"\\"===t.charAt(0)&&(t=t.slice(1));var v=D[t]();return R.map(function(a){v.blocks=[a];a.adopt(v,0,0)}).then(b("\\right")).skip(e).then(a(/^(?:[\])|]|\\\})/)).then(function(a){return a.slice(-1)!==
v.end.slice(-1)?E.fail("open doesn't match close"):f(v)})})}});a.right=q(I,function(a){a.parser=function(){return E.fail("unmatched \\right")}});a.intervalopenleft=b(T,"(","]","(","]");a.intervalopenright=b(T,"[",")","[",")");a.lbrace=D["{"]=b(T,"{","}","\\{","\\}");a.langle=a.lang=b(T,"&lang;","&rang;","\\langle ","\\rangle ");var aa=q(T,function(a,b){a.createLeftOf=function(a){a[1]||!a.parent.parent||a.parent.parent.end!==this.end||this.replacedFragment?b.createLeftOf.call(this,a):a.insRightOf(a.parent.parent)};
a.placeCursor=function(a){this.ends[-1].blur();a.insRightOf(this)}});a.rbrace=D["}"]=b(aa,"{","}","\\{","\\}");a.rangle=a.rang=b(aa,"&lang;","&rang;","\\langle ","\\rangle ");S=function(a,b){a.init=function(a,f){b.init.call(this,a,f,a,f)}};z=q(T,S);a.lparen=D["("]=b(z,"(",")");a.lbrack=a.lbracket=D["["]=b(z,"[","]");S=q(aa,S);a.rparen=D[")"]=b(S,"(",")");a.rbrack=a.rbracket=D["]"]=b(S,"[","]");a.lpipe=a.rpipe=D["|"]=q(z,function(a,b){a.init=function(){b.init.call(this,"|","|")};a.createLeftOf=aa.prototype.createLeftOf});
var Y=D.$=a.text=a.textnormal=a.textrm=a.textup=a.textmd=q(I,function(a,b){a.ctrlSeq="\\text";a.htmlTemplate='<span class="text">&0</span>';a.replaces=function(a){a instanceof Z?this.replacedText=a.remove().jQ.text():"string"===typeof a&&(this.replacedText=a)};a.textTemplate=['"','"'];a.parser=function(){var a=this,b=E.string,e=E.regex;return E.optWhitespace.then(b("{")).then(e(/^[^}]*/)).skip(b("}")).map(function(b){a.createBlocks();for(var f=a.ends[-1],e=0;e<b.length;e+=1)g(b.charAt(e)).adopt(f,
f.ends[1],0);return a})};a.createBlocks=function(){this.ends[-1]=this.ends[1]=ma();this.blocks=[this.ends[-1]];this.ends[-1].parent=this};a.finalizeInsert=function(){this.ends[-1].blur=function(){delete this.blur;return this};b.finalizeInsert.call(this)};a.createLeftOf=function(a){b.createLeftOf.call(this,this.cursor=a);if(this.replacedText)for(var f=0;f<this.replacedText.length;f+=1)this.ends[-1].write(a,this.replacedText.charAt(f))}}),ma=q(C,function(a,b){a.onKey=function(a,b){if("Spacebar"===a||
"Shift-Spacebar"===a)return!1};a.deleteOutOf=function(a,b){this.isEmpty()&&b.insRightOf(this.parent)};a.write=function(a,b,e){e&&e.remove();if("$"!==b){var t;"<"===b?t="&lt;":">"===b&&(t="&gt;");g(b,t).createLeftOf(a)}else this.isEmpty()?(a.insRightOf(this.parent).backspace(),g("\\$","$").createLeftOf(a)):a[1]?a[-1]?(b=Y(),b.replaces(Z(a[1],this.ends[1])),a.insRightOf(this.parent),b.adopt=function(){delete this.adopt;this.adopt.apply(this,arguments);this[-1]=0},b.createLeftOf(a),b[-1]=this.parent,
a.insLeftOf(b)):a.insLeftOf(this.parent):a.insRightOf(this.parent);return!1};a.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b[1]===a?b[1]=a[1]:b[-1]===a&&(b[-1]=a[-1]),b.show().parent.bubble("redraw"))}return this};a.focus=function(){b.focus.call(this);var a=this.parent;if(a[1].ctrlSeq===a.ctrlSeq){var f=this,e=a.cursor,a=a[1].ends[-1];a.eachChild(function(a){a.parent=f;a.jQ.appendTo(f.jQ)});
this.ends[1]?this.ends[1][1]=a.ends[-1]:this.ends[-1]=a.ends[-1];a.ends[-1][-1]=this.ends[1];this.ends[1]=a.ends[1];a.parent.remove();e[-1]?e.insRightOf(e[-1]):e.insAtLeftEnd(this);e.parent.bubble("redraw")}else a[-1].ctrlSeq===a.ctrlSeq&&(e=a.cursor,e[-1]?a[-1].ends[-1].focus():e.insAtRightEnd(a[-1].ends[-1]));return this}});a.em=a.italic=a.italics=a.emph=a.textit=a.textsl=M("\\textit","i",'class="text"');a.strong=a.bold=a.textbf=M("\\textbf","b",'class="text"');a.sf=a.textsf=M("\\textsf","span",
'class="sans-serif text"');a.tt=a.texttt=M("\\texttt","span",'class="monospace text"');a.textsc=M("\\textsc","span",'style="font-variant:small-caps" class="text"');a.uppercase=M("\\uppercase","span",'style="text-transform:uppercase" class="text"');a.lowercase=M("\\lowercase","span",'style="text-transform:lowercase" class="text"');D["\\"]=q(I,function(a,b){a.ctrlSeq="\\";a.replaces=function(a){this._replacedFragment=a.disown();this.isEmpty=function(){return!1}};a.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0</span></span>';
a.textTemplate=["\\"];a.createBlocks=function(){b.createBlocks.call(this);this.ends[-1].focus=function(){this.parent.jQ.addClass("hasCursor");this.isEmpty()&&this.parent.jQ.removeClass("empty");return this};this.ends[-1].blur=function(){this.parent.jQ.removeClass("hasCursor");this.isEmpty()&&this.parent.jQ.addClass("empty");return this}};a.createLeftOf=function(a){b.createLeftOf.call(this,a);this.cursor=a.insAtRightEnd(this.ends[-1]);if(this._replacedFragment){var f=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",
function(a){x(a.target=f).trigger(a);return!1}).insertBefore(this.jQ).add(this.jQ)}this.ends[-1].write=function(a,b,f){f&&f.remove();b.match(/[a-z]/i)?g(b).createLeftOf(a):(this.parent.renderCommand(),"\\"===b&&this.isEmpty()||this.parent.parent.write(a,b))}};a.latex=function(){return"\\"+this.ends[-1].latex()+" "};a.onKey=function(a,b){if("Tab"===a||"Enter"===a||"Spacebar"===a)return this.renderCommand(),b.preventDefault(),!1};a.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this[1]?
this.cursor.insLeftOf(this[1]):this.cursor.insAtRightEnd(this.parent);var a=this.ends[-1].latex();a||(a="backslash");this.cursor.insertCmd(a,this._replacedFragment)}});z=a.binom=a.binomial=q(I,function(a,b){a.ctrlSeq="\\binom";a.htmlTemplate='<span class="paren scaled">(</span><span class="non-leaf"><span class="array non-leaf"><span>&0</span><span>&1</span></span></span><span class="paren scaled">)</span>';a.textTemplate=["choose(",",",")"];a.redraw=function(){var a=this.jQ.eq(1),a=a.outerHeight()/
+a.css("fontSize").slice(0,-2),b=this.jQ.filter(".paren");V(b,Q(1+.2*(a-1),1.2),1.05*a)}});a.choose=q(z,function(a){a.createLeftOf=ka.prototype.createLeftOf});a.vector=q(I,function(a,b){a.ctrlSeq="\\vector";a.htmlTemplate='<span class="array"><span>&0</span></span>';a.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){a.push(b.latex());return a}).join("\\\\")+"\\end{matrix}"};a.text=function(){return"["+this.foldChildren([],function(a,b){a.push(b.text());return a}).join()+
"]"};a.createLeftOf=function(a){b.createLeftOf.call(this,this.cursor=a)};a.onKey=function(a,b){var e=this.cursor.parent;if(e.parent===this){if("Enter"===a){var n=C();n.parent=this;n.jQ=x("<span></span>").attr("mathquill-block-id",n.id).insertAfter(e.jQ);e[1]?e[1][-1]=n:this.ends[1]=n;n[1]=e[1];e[1]=n;n[-1]=e;this.bubble("redraw").cursor.insAtRightEnd(n);b.preventDefault();return!1}if("Tab"===a&&!e[1]){if(e.isEmpty()){if(e[-1])return this.cursor.insRightOf(this),delete e[-1][1],this.ends[1]=e[-1],
e.jQ.remove(),this.bubble("redraw"),b.preventDefault(),!1;return}n=C();n.parent=this;n.jQ=x("<span></span>").attr("mathquill-block-id",n.id).appendTo(this.jQ);this.ends[1]=n;e[1]=n;n[-1]=e;this.bubble("redraw").cursor.insAtRightEnd(n);b.preventDefault();return!1}if(8===b.which){if(e.isEmpty())return e[-1]?(this.cursor.insAtRightEnd(e[-1]),e[-1][1]=e[1]):(this.cursor.insLeftOf(this),this.ends[-1]=e[1]),e[1]?e[1][-1]=e[-1]:this.ends[1]=e[-1],e.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():
this.bubble("redraw"),b.preventDefault(),!1;if(!this.cursor[-1])return b.preventDefault(),!1}}}});a.editable=q(ba,function(a,b){a.init=function(){I.prototype.init.call(this,"\\editable")};a.jQadd=function(){b.jQadd.apply(this,arguments);var a=this.ends[-1].disown(),f=this.jQ.children().detach();this.ends[-1]=this.ends[1]=A();this.blocks=[this.ends[-1]];this.ends[-1].parent=this;H(this.jQ,this.ends[-1],!1,!0);this.cursor=this.ends[-1].cursor;a.children().adopt(this.ends[-1],0,0);f.appendTo(this.ends[-1].jQ);
this.ends[-1].cursor.insAtRightEnd(this.ends[-1])};a.latex=function(){return this.ends[-1].latex()};a.text=function(){return this.ends[-1].text()}});a.f=b(O,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>');var J=q(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<var>"+(f||a)+"</var>")};a.text=function(){var a=this.ctrlSeq;!this[-1]||this[-1]instanceof J||this[-1]instanceof y||(a="*"+a);!this[1]||this[1]instanceof y||"^"===this[1].ctrlSeq||(a+=
"*");return a};a.createLeftOf=function(a){var b=this.ctrlSeq;for(d=a[-1];d&&d instanceof J;)b=d.ctrlSeq+b,d=d[-1];var e;if(e=b.match(/(sqrt|root|arcsin|arccos|arctan|sin|cos|tan|sec|csc|cot|log|ln)/)){for(b=0;b<e[0].length-1;b++)a.selectLeft();"root"==e[0]&&(e[0]="nthroot{3}");e[0].match(/(sqrt|root)/)?a.writeLatex("\\"+e[0]+"{}").parent.blur():a.writeLatex("\\"+e[0]+"\\left(\\right)").parent.blur();a.moveLeft()}else(e=b.match(/(pi|^oo)$/))?("oo"==e[0]&&(e[0]="infty"),a.selectLeft(),a.writeLatex("\\"+
e[0]).parent.blur()):I.prototype.createLeftOf.apply(this,arguments)}}),g=q(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<span>"+(f||a)+"</span>")}});D[" "]=b(g,"\\:"," ");a.prime=D["'"]=b(g,"'","&prime;");z=q(O,function(a,b){a.init=function(a,f){b.init.call(this,a,'<span class="nonSymbola">'+(f||a)+"</span>")}});a["@"]=z;a["&"]=b(z,"\\&","&amp;");a["%"]=b(z,"\\%","%");a.alpha=a.beta=a.gamma=a.delta=a.zeta=a.eta=a.theta=a.iota=a.kappa=a.mu=a.nu=a.xi=a.rho=a.sigma=a.tau=a.chi=a.psi=a.omega=
q(J,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});a.phi=b(J,"\\phi ","&#981;");a.phiv=a.varphi=b(J,"\\varphi ","&phi;");a.epsilon=b(J,"\\epsilon ","&#1013;");a.epsiv=a.varepsilon=b(J,"\\varepsilon ","&epsilon;");a.piv=a.varpi=b(J,"\\varpi ","&piv;");a.sigmaf=a.sigmav=a.varsigma=b(J,"\\varsigma ","&sigmaf;");a.thetav=a.vartheta=a.thetasym=b(J,"\\vartheta ","&thetasym;");a.upsilon=a.upsi=b(J,"\\upsilon ","&upsilon;");a.gammad=a.Gammad=a.digamma=b(J,"\\digamma ","&#989;");
a.kappav=a.varkappa=b(J,"\\varkappa ","&#1008;");a.rhov=a.varrho=b(J,"\\varrho ","&#1009;");a.pi=a["\u00cf\u20ac"]=b(z,"\\pi ","&pi;");a.lambda=b(z,"\\lambda ","&lambda;");a.Upsilon=a.Upsi=a.upsih=a.Upsih=b(O,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>');a.Gamma=a.Delta=a.Theta=a.Lambda=a.Xi=a.Pi=a.Sigma=a.Phi=a.Psi=a.Omega=a.forall=q(g,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});z=q(I,function(a){a.init=function(a){this.latex=a};a.createLeftOf=function(a){a.writeLatex(this.latex)};
a.parser=function(){var a=R.parse(this.latex).children();return E.succeed(a)}});a["\u00b9"]=b(z,"^1");a["\u00b2"]=b(z,"^2");a["\u00b3"]=b(z,"^3");a["\u00bc"]=b(z,"\\frac14");a["\u00bd"]=b(z,"\\frac12");a["\u00be"]=b(z,"\\frac34");var y=q(O,function(a,b){a.init=function(a,f,e){b.init.call(this,a,'<span class="binary-operator">'+f+"</span>",e)}}),z=q(y,function(a){a.init=g.prototype.init;a.respace=function(){this.jQ[0].className=this[-1]?this[-1]instanceof y&&this[1]&&!(this[1]instanceof y)?"unary-operator":
"binary-operator":"";return this}});a["+"]=b(z,"+","+");a["\u2013"]=a["-"]=b(z,"-","&minus;");a["\u00b1"]=a.pm=a.plusmn=a.plusminus=b(z,"\\pm ","&plusmn;");a.mp=a.mnplus=a.minusplus=b(z,"\\mp ","&#8723;");D["*"]=a.sdot=a.cdot=b(y,"\\cdot ","&middot;");a["="]=b(y,"=","=");a["<"]=b(y,"<","&lt;");a[">"]=b(y,">","&gt;");a.notin=a.sim=a.cong=a.equiv=a.oplus=a.otimes=q(y,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","&"+a+";")}});a.times=b(y,"\\times ","&times;","[x]");a["\u00f7"]=a.div=
a.divide=a.divides=b(y,"\\div ","&divide;","[/]");a["\u2260"]=a.ne=a.neq=b(y,"\\ne ","&ne;");a.ast=a.star=a.loast=a.lowast=b(y,"\\ast ","&lowast;");a.therefor=a.therefore=b(y,"\\therefore ","&there4;");a.cuz=a.because=b(y,"\\because ","&#8757;");a.prop=a.propto=b(y,"\\propto ","&prop;");a["\u2248"]=a.asymp=a.approx=b(y,"\\approx ","&asymp;");a.lt=b(y,"<","&lt;");a.gt=b(y,">","&gt;");a["\u2264"]=a.le=a.leq=b(y,"\\le ","&le;");a["\u2265"]=a.ge=a.geq=b(y,"\\ge ","&ge;");a.isin=a["in"]=b(y,"\\in ","&isin;");
a.ni=a.contains=b(y,"\\ni ","&ni;");a.notni=a.niton=a.notcontains=a.doesnotcontain=b(y,"\\not\\ni ","&#8716;");a.sub=a.subset=b(y,"\\subset ","&sub;");a.sup=a.supset=a.superset=b(y,"\\supset ","&sup;");a.nsub=a.notsub=a.nsubset=a.notsubset=b(y,"\\not\\subset ","&#8836;");a.nsup=a.notsup=a.nsupset=a.notsupset=a.nsuperset=a.notsuperset=b(y,"\\not\\supset ","&#8837;");a.sube=a.subeq=a.subsete=a.subseteq=b(y,"\\subseteq ","&sube;");a.supe=a.supeq=a.supsete=a.supseteq=a.supersete=a.superseteq=b(y,"\\supseteq ",
"&supe;");a.nsube=a.nsubeq=a.notsube=a.notsubeq=a.nsubsete=a.nsubseteq=a.notsubsete=a.notsubseteq=b(y,"\\not\\subseteq ","&#8840;");a.nsupe=a.nsupeq=a.notsupe=a.notsupeq=a.nsupsete=a.nsupseteq=a.notsupsete=a.notsupseteq=a.nsupersete=a.nsuperseteq=a.notsupersete=a.notsuperseteq=b(y,"\\not\\supseteq ","&#8841;");var W=q(O,function(a,b){a.init=function(a,f){b.init.call(this,a,"<big>"+f+"</big>")}});a["\u2211"]=a.sum=a.summation=b(W,"\\sum ","&sum;");a["\u220f"]=a.prod=a.product=b(W,"\\prod ","&prod;");
a.coprod=a.coproduct=b(W,"\\coprod ","&#8720;");a["\u222b"]=a["int"]=a.integral=b(W,"\\int ","&int;");a.N=a.naturals=a.Naturals=b(g,"\\mathbb{N}","&#8469;");a.P=a.primes=a.Primes=a.projective=a.Projective=a.probability=a.Probability=b(g,"\\mathbb{P}","&#8473;");a.Z=a.integers=a.Integers=b(g,"\\mathbb{Z}","&#8484;");a.Q=a.rationals=a.Rationals=b(g,"\\mathbb{Q}","&#8474;");a.R=a.reals=a.Reals=b(g,"\\mathbb{R}","&#8477;");a.C=a.complex=a.Complex=a.complexes=a.Complexes=a.complexplane=a.Complexplane=
a.ComplexPlane=b(g,"\\mathbb{C}","&#8450;");a.H=a.Hamiltonian=a.quaternions=a.Quaternions=b(g,"\\mathbb{H}","&#8461;");a.quad=a.emsp=b(g,"\\quad ","    ");a.qquad=b(g,"\\qquad ","        ");a.diamond=b(g,"\\diamond ","&#9671;");a.bigtriangleup=b(g,"\\bigtriangleup ","&#9651;");a.ominus=b(g,"\\ominus ","&#8854;");a.uplus=b(g,"\\uplus ","&#8846;");a.bigtriangledown=b(g,"\\bigtriangledown ","&#9661;");a.sqcap=b(g,"\\sqcap ","&#8851;");a.triangleleft=b(g,"\\triangleleft ","&#8882;");a.sqcup=b(g,"\\sqcup ",
"&#8852;");a.triangleright=b(g,"\\triangleright ","&#8883;");a.odot=b(g,"\\odot ","&#8857;");a.bigcirc=b(g,"\\bigcirc ","&#9711;");a.dagger=b(g,"\\dagger ","&#0134;");a.ddagger=b(g,"\\ddagger ","&#135;");a.wr=b(g,"\\wr ","&#8768;");a.amalg=b(g,"\\amalg ","&#8720;");a.models=b(g,"\\models ","&#8872;");a.prec=b(g,"\\prec ","&#8826;");a.succ=b(g,"\\succ ","&#8827;");a.preceq=b(g,"\\preceq ","&#8828;");a.succeq=b(g,"\\succeq ","&#8829;");a.simeq=b(g,"\\simeq ","&#8771;");a.mid=b(g,"\\mid ","&#8739;");
a.ll=b(g,"\\ll ","&#8810;");a.gg=b(g,"\\gg ","&#8811;");a.parallel=b(g,"\\parallel ","&#8741;");a.bowtie=b(g,"\\bowtie ","&#8904;");a.sqsubset=b(g,"\\sqsubset ","&#8847;");a.sqsupset=b(g,"\\sqsupset ","&#8848;");a.smile=b(g,"\\smile ","&#8995;");a.sqsubseteq=b(g,"\\sqsubseteq ","&#8849;");a.sqsupseteq=b(g,"\\sqsupseteq ","&#8850;");a.doteq=b(g,"\\doteq ","&#8784;");a.frown=b(g,"\\frown ","&#8994;");a.vdash=b(g,"\\vdash ","&#8870;");a.dashv=b(g,"\\dashv ","&#8867;");a.longleftarrow=b(g,"\\longleftarrow ",
"&#8592;");a.longrightarrow=b(g,"\\longrightarrow ","&#8594;");a.Longleftarrow=b(g,"\\Longleftarrow ","&#8656;");a.Longrightarrow=b(g,"\\Longrightarrow ","&#8658;");a.longleftrightarrow=b(g,"\\longleftrightarrow ","&#8596;");a.updownarrow=b(g,"\\updownarrow ","&#8597;");a.Longleftrightarrow=b(g,"\\Longleftrightarrow ","&#8660;");a.Updownarrow=b(g,"\\Updownarrow ","&#8661;");a.mapsto=b(g,"\\mapsto ","&#8614;");a.nearrow=b(g,"\\nearrow ","&#8599;");a.hookleftarrow=b(g,"\\hookleftarrow ","&#8617;");
a.hookrightarrow=b(g,"\\hookrightarrow ","&#8618;");a.searrow=b(g,"\\searrow ","&#8600;");a.leftharpoonup=b(g,"\\leftharpoonup ","&#8636;");a.rightharpoonup=b(g,"\\rightharpoonup ","&#8640;");a.swarrow=b(g,"\\swarrow ","&#8601;");a.leftharpoondown=b(g,"\\leftharpoondown ","&#8637;");a.rightharpoondown=b(g,"\\rightharpoondown ","&#8641;");a.nwarrow=b(g,"\\nwarrow ","&#8598;");a.ldots=b(g,"\\ldots ","&#8230;");a.cdots=b(g,"\\cdots ","&#8943;");a.vdots=b(g,"\\vdots ","&#8942;");a.ddots=b(g,"\\ddots ",
"&#8944;");a.surd=b(g,"\\surd ","&#8730;");a.triangle=b(g,"\\triangle ","&#9653;");a.ell=b(g,"\\ell ","&#8467;");a.top=b(g,"\\top ","&#8868;");a.flat=b(g,"\\flat ","&#9837;");a.natural=b(g,"\\natural ","&#9838;");a.sharp=b(g,"\\sharp ","&#9839;");a.wp=b(g,"\\wp ","&#8472;");a.bot=b(g,"\\bot ","&#8869;");a.clubsuit=b(g,"\\clubsuit ","&#9827;");a.diamondsuit=b(g,"\\diamondsuit ","&#9826;");a.heartsuit=b(g,"\\heartsuit ","&#9825;");a.spadesuit=b(g,"\\spadesuit ","&#9824;");a.oint=b(g,"\\oint ","&#8750;");
a.bigcap=b(g,"\\bigcap ","&#8745;");a.bigcup=b(g,"\\bigcup ","&#8746;");a.bigsqcup=b(g,"\\bigsqcup ","&#8852;");a.bigvee=b(g,"\\bigvee ","&#8744;");a.bigwedge=b(g,"\\bigwedge ","&#8743;");a.bigodot=b(g,"\\bigodot ","&#8857;");a.bigotimes=b(g,"\\bigotimes ","&#8855;");a.bigoplus=b(g,"\\bigoplus ","&#8853;");a.biguplus=b(g,"\\biguplus ","&#8846;");a.lfloor=b(g,"\\lfloor ","&#8970;");a.rfloor=b(g,"\\rfloor ","&#8971;");a.lceil=b(g,"\\lceil ","&#8968;");a.rceil=b(g,"\\rceil ","&#8969;");a.slash=b(g,"\\slash ",
"&#47;");a.opencurlybrace=b(g,"\\opencurlybrace ","&#123;");a.closecurlybrace=b(g,"\\closecurlybrace ","&#125;");a.caret=b(g,"\\caret ","^");a.underscore=b(g,"\\underscore ","_");a.backslash=b(g,"\\backslash ","\\");a.vert=b(g,"|");a.perp=a.perpendicular=b(g,"\\perp ","&perp;");a.nabla=a.del=b(g,"\\nabla ","&nabla;");a.hbar=b(g,"\\hbar ","&#8463;");a.AA=a.Angstrom=a.angstrom=b(g,"\\text\\AA ","&#8491;");a.ring=a.circ=a.circle=b(g,"\\circ ","&#8728;");a.bull=a.bullet=b(g,"\\bullet ","&bull;");a.setminus=
a.smallsetminus=b(g,"\\setminus ","&#8726;");a.not=a["\u00ac"]=a.neg=b(g,"\\neg ","&not;");a["\u2026"]=a.dots=a.ellip=a.hellip=a.ellipsis=a.hellipsis=b(g,"\\dots ","&hellip;");a.converges=a.darr=a.dnarr=a.dnarrow=a.downarrow=b(g,"\\downarrow ","&darr;");a.dArr=a.dnArr=a.dnArrow=a.Downarrow=b(g,"\\Downarrow ","&dArr;");a.diverges=a.uarr=a.uparrow=b(g,"\\uparrow ","&uarr;");a.uArr=a.Uparrow=b(g,"\\Uparrow ","&uArr;");a.to=b(y,"\\to ","&rarr;");a.rarr=a.rightarrow=b(g,"\\rightarrow ","&rarr;");a.implies=
b(y,"\\Rightarrow ","&rArr;");a.rArr=a.Rightarrow=b(g,"\\Rightarrow ","&rArr;");a.gets=b(y,"\\gets ","&larr;");a.larr=a.leftarrow=b(g,"\\leftarrow ","&larr;");a.impliedby=b(y,"\\Leftarrow ","&lArr;");a.lArr=a.Leftarrow=b(g,"\\Leftarrow ","&lArr;");a.harr=a.lrarr=a.leftrightarrow=b(g,"\\leftrightarrow ","&harr;");a.iff=b(y,"\\Leftrightarrow ","&hArr;");a.hArr=a.lrArr=a.Leftrightarrow=b(g,"\\Leftrightarrow ","&hArr;");a.Re=a.Real=a.real=b(g,"\\Re ","&real;");a.Im=a.imag=a.image=a.imagin=a.imaginary=
a.Imaginary=b(g,"\\Im ","&image;");a.part=a.partial=b(g,"\\partial ","&part;");a.inf=a.infin=a.infty=a.infinity=b(g,"\\infty ","&infin;");a.alef=a.alefsym=a.aleph=a.alephsym=b(g,"\\aleph ","&alefsym;");a.xist=a.xists=a.exist=a.exists=b(g,"\\exists ","&exist;");a.and=a.land=a.wedge=b(g,"\\wedge ","&and;");a.or=a.lor=a.vee=b(g,"\\vee ","&or;");a.o=a.O=a.empty=a.emptyset=a.oslash=a.Oslash=a.nothing=a.varnothing=b(y,"\\varnothing ","&empty;");a.cup=a.union=b(y,"\\cup ","&cup;");a.cap=a.intersect=a.intersection=
b(y,"\\cap ","&cap;");a.deg=a.degree=b(g,"^\\circ ","&deg;");a.ang=a.angle=b(g,"\\angle ","&ang;");var fa=q(O,function(a,b){a.init=function(a){b.init.call(this,"\\"+a+" ","<span>"+a+"</span>")};a.respace=function(){this.jQ[0].className=this[1]instanceof N||this[1]instanceof T?"":"non-italicized-function"}});a.ln=a.lg=a.log=a.span=a.proj=a.det=a.dim=a.min=a.max=a.mod=a.lcm=a.gcd=a.gcf=a.hcf=a.lim=fa;(function(){var b="sin cos tan sec cosec csc cotan cot".split(" "),e;for(e in b)a[b[e]]=a[b[e]+"h"]=
a["a"+b[e]]=a["arc"+b[e]]=a["a"+b[e]+"h"]=a["arc"+b[e]+"h"]=fa})();var R=function(){function b(a){for(var f=a[0]||C(),e=1;e<a.length;e+=1)a[e].children().adopt(f,f.ends[1],0);return f}var e=E.string,n=E.regex,f=E.any,k=E.optWhitespace,l=E.succeed,v=E.fail,m=E.letter.map(J),r=n(/^[^${}\\_^]/).map(g),n=n(/^[^\\a-eg-zA-Z]/).or(e("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(f))).then(function(b){var f=a[b];return f?f(b).parser():v("unknown command: \\"+b)}).or(m).or(r),f=e("{").then(function(){return q}).skip(e("}")),
n=k.then(f.or(n.map(function(a){var b=C();a.adopt(b,0,0);return b}))),q=n.many().map(b).skip(k),e=e("[").then(n.then(function(a){return"]"!==a.join("latex")?l(a):v()}).many().map(b).skip(k)).skip(e("]")),k=q;k.block=n;k.optBlock=e;return k}(),ha=q(n,function(b){function e(a,b){if(a[1][b])a.insAtLeftEnd(a[1][b]);else if(a[-1][b])a.insAtRightEnd(a[-1][b]);else{var k=a.parent;do{var v=k[b];if(v&&("function"===typeof v&&(v=k[b](a)),!1===v||v instanceof C)){a.upDownCache[k.id]=n(a.parent,a[-1],a[1]);v instanceof
C&&((k=a.upDownCache[v.id])?k[1]?a.insLeftOf(k[1]):a.insAtRightEnd(k.parent):(k=h(a).left,a.insAtRightEnd(v),a.seekHoriz(k,v)));break}k=k.parent.parent}while(k)}return a.clearSelection().show()}function h(a){var b=a.jQ.removeClass("cursor").offset();a.jQ.addClass("cursor");return b}b.init=function(a){this.parent=this.root=a;var b=this.jQ=this._jQ=x('<span class="cursor">&zwj;</span>');this.blink=function(){b.toggleClass("blink")};this.upDownCache={}};b.show=function(){this.jQ=this._jQ.removeClass("blink");
"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[-1][-1]===this[-1]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus());this.intervalId=setInterval(this.blink,500);return this};b.hide=function(){"intervalId"in this&&clearInterval(this.intervalId);delete this.intervalId;this.jQ.detach();this.jQ=x();return this};b.withDirInsertAt=function(a,b,e,n){var k=this.parent;this.parent=
b;this[a]=e;this[-a]=n;k.blur()};b.insDirOf=function(a,b){w(a);this.withDirInsertAt(a,b.parent,b[a],b);this.parent.jQ.addClass("hasCursor");this.jQ.insDirOf(a,b.jQ);return this};b.insLeftOf=function(a){return this.insDirOf(-1,a)};b.insRightOf=function(a){return this.insDirOf(1,a)};b.insAtDirEnd=function(a,b){w(a);this.withDirInsertAt(a,b,0,b.ends[a]);-1===a&&b.textarea?this.jQ.insDirOf(-a,b.textarea):this.jQ.insAtDirEnd(a,b.jQ);b.focus();return this};b.insAtLeftEnd=function(a){return this.insAtDirEnd(-1,
a)};b.insAtRightEnd=function(a){return this.insAtDirEnd(1,a)};b.hopDir=function(a){w(a);this.jQ.insDirOf(a,this[a].jQ);this[-a]=this[a];this[a]=this[a][a];return this};b.hopLeft=function(){return this.hopDir(-1)};b.hopRight=function(){return this.hopDir(1)};b.moveDirWithin=function(a,b){w(a);this[a]?this[a].ends[-a]?this.insAtDirEnd(-a,this[a].ends[-a]):this.hopDir(a):this.parent!==b&&(this.parent[a]?this.insAtDirEnd(-a,this.parent[a]):this.insDirOf(a,this.parent.parent))};b.moveLeftWithin=function(a){return this.moveDirWithin(-1,
a)};b.moveRightWithin=function(a){return this.moveDirWithin(1,a)};b.moveDir=function(a){w(a);this.upDownCache={};this.selection?this.insDirOf(a,this.selection.ends[a]).clearSelection():this.moveDirWithin(a,this.root);return this.show()};b.moveLeft=function(){return this.moveDir(-1)};b.moveRight=function(){return this.moveDir(1)};b.moveUp=function(){return e(this,"up")};b.moveDown=function(){return e(this,"down")};b.seek=function(a,b,e){this.upDownCache={};var n,k=this.clearSelection().show();if(a.hasClass("empty"))return k.insAtLeftEnd(r[a.attr("mathquill-block-id")]),
k;e=r[a.attr("mathquill-command-id")];if(e instanceof O)return a.outerWidth()>2*(b-a.offset().left)?k.insLeftOf(e):k.insRightOf(e),k;e||(n=r[a.attr("mathquill-block-id")],n||(a=a.parent(),e=r[a.attr("mathquill-command-id")],e||(n=r[a.attr("mathquill-block-id")],n||(n=k.root))));e?k.insRightOf(e):k.insAtRightEnd(n);return k.seekHoriz(b,k.root)};b.seekHoriz=function(a,b){var e=h(this).left-a,n;do this.moveLeftWithin(b),n=e,e=h(this).left-a;while(0<e&&(this[-1]||this.parent!==b));-e>n&&this.moveRightWithin(b);
return this};b.writeLatex=function(a){this.upDownCache={};this.show().deleteSelection();var b=E.all;if(a=R.skip(E.eof).or(b.result(!1)).parse(a))a.children().adopt(this.parent,this[-1],this[1]),r.jQize(a.join("html")).insertBefore(this.jQ),this[-1]=a.ends[1],a.finalizeInsert(),this.parent.bubble("redraw");return this.hide()};b.write=function(a){var b=this.prepareWrite();return this.insertCh(a,b)};b.insertCh=function(a,b){this.parent.write(this,a,b);return this};b.insertCmd=function(b,e){var n=a[b];
n?(n=n(b),e&&n.replaces(e),n.createLeftOf(this)):(n=Y(),n.replaces(b),n.ends[-1].focus=function(){delete this.focus;return this},n.createLeftOf(this),this.insRightOf(n),e&&e.remove());return this};b.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,e=a[1],n=a[-1];a.disown().eachChild(function(k){k.isEmpty()||(k.children().adopt(b,n,e).each(function(b){b.jQ.insertBefore(a.jQ.first())}),n=k.ends[1])});if(!this[1])if(this[-1])this[1]=this[-1][1];else for(;!this[1];)if(this.parent=this.parent[1])this[1]=
this.parent.ends[-1];else{this[1]=a[1];this.parent=b;break}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(b);a.jQ.remove();a[-1]&&a[-1].respace();a[1]&&a[1].respace()};b.deleteDir=function(a){w(a);this.upDownCache={};this.show();if(!this.deleteSelection())if(this[a])this[a].isEmpty()?this[a]=this[a].remove()[a]:this.selectDir(a);else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insDirOf(-a,this.parent.parent).deleteDir(a);this.unwrapGramp()}this[-1]&&this[-1].respace();
this[1]&&this[1].respace();this.parent.bubble("redraw");return this};b.backspace=function(){return this.deleteDir(-1)};b.deleteForward=function(){return this.deleteDir(1)};b.selectFrom=function(a){var b=this,e=a;a:for(;;){for(var n=this;n!==b.parent.parent;n=n.parent.parent)if(n.parent===e.parent){a=n;break a}for(n=a;n!==e.parent.parent;n=n.parent.parent)if(b.parent===n.parent){a=b;e=n;break a}b.parent.parent&&(b=b.parent.parent);e.parent.parent&&(e=e.parent.parent)}var k;if(a[1]!==e){for(b=a;b;b=
b[1])if(b===e[-1]){k=!0;break}k||(k=e,e=a,a=k)}this.hide().selection=ga(a[-1][1]||a.parent.ends[-1],e[1][-1]||e.parent.ends[1]);this.insRightOf(e[1][-1]||e.parent.ends[1]);this.root.selectionChanged()};b.selectDir=function(a){w(a);this.upDownCache={};if(this.selection)if(this.selection.ends[a]===this[-a])this[a]?this.hopDir(a).selection.extendDir(a):this.parent!==this.root&&this.insDirOf(a,this.parent.parent).selection.levelUp();else{this.hopDir(a);if(this.selection.ends[a]===this.selection.ends[-a]){this.clearSelection().show();
return}this.selection.retractDir(a)}else{if(this[a])this.hopDir(a);else{if(this.parent===this.root)return;this.insDirOf(a,this.parent.parent)}this.hide().selection=ga(this[-a])}this.root.selectionChanged()};b.selectLeft=function(){return this.selectDir(-1)};b.selectRight=function(){return this.selectDir(1)};b.prepareMove=function(){this.upDownCache={};return this.show().clearSelection()};b.prepareEdit=function(){this.upDownCache={};return this.show().deleteSelection()};b.prepareWrite=function(){this.upDownCache=
{};return this.show().replaceSelection()};b.clearSelection=function(){this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged());return this};b.deleteSelection=function(){if(!this.selection)return!1;this[-1]=this.selection.ends[-1][-1];this[1]=this.selection.ends[1][1];this.selection.remove();this.root.selectionChanged();return delete this.selection};b.replaceSelection=function(){var a=this.selection;a&&(this[-1]=a.ends[-1][-1],this[1]=a.ends[1][1],delete this.selection);
return a}}),ga=q(Z,function(a,b){a.init=function(){b.init.apply(this,arguments);this.jQwrap(this.jQ)};a.jQwrap=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()};a.adopt=function(){this.jQ.replaceWith(this.jQ=this.jQ.children());return b.adopt.apply(this,arguments)};a.clear=function(){this.jQ.replaceWith(this.jQ.children());return this};a.levelUp=function(){var a=this.ends[-1]=this.ends[1]=this.ends[1].parent.parent;this.clear().jQwrap(a.jQ);return this};a.extendDir=function(a){w(a);
this.ends[a]=this.ends[a][a];this.ends[a].jQ.insAtDirEnd(a,this.jQ);return this};a.extendLeft=function(){return this.extendDir(-1)};a.extendRight=function(){return this.extendDir(1)};a.retractDir=function(a){w(a);this.ends[-a].jQ.insDirOf(-a,this.jQ);this.ends[-a]=this.ends[-a][a]};a.retractRight=function(){return this.retractDir(1)};a.retractLeft=function(){return this.retractDir(-1)}});B.fn.mathquill=function(a,b){switch(a){case "redraw":return this.each(function(){var a=x(this).attr("mathquill-block-id");
(a=a&&r[a])&&function ia(a){a.eachChild(ia);a.redraw&&a.redraw()}(a)});case "revert":return this.each(function(){var a=x(this).attr("mathquill-block-id");(a=a&&r[a])&&a.revert&&a.revert()});case "latex":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");(a=a&&r[a])&&a.renderLatex(b)});var e=x(this).attr("mathquill-block-id");return(e=e&&r[e])&&e.latex();case "text":return(e=(e=x(this).attr("mathquill-block-id"))&&r[e])&&e.text();case "html":return this.html().replace(/ ?hasCursor|hasCursor /,
"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case "write":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");(a=(a=a&&r[a])&&a.cursor)&&a.writeLatex(b).parent.blur()});case "cmd":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");if(a=(a=a&&r[a])&&a.cursor){var e=a.prepareWrite();/^\\[a-z]+$/i.test(b)?
a.insertCmd(b.slice(1),e):a.insertCh(b,e);a.hide().parent.blur()}});case "writesimpfunc":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");if(a=(a=a&&r[a])&&a.cursor)a.selection?a.writeLatex(b+"{"+a.selection.latex()+"}").parent.blur():a.writeLatex(b+"{}").parent.blur(),a.moveLeft()});case "writefunc":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");if(a=(a=a&&r[a])&&a.cursor)a.selection?a.writeLatex(b+"\\left("+a.selection.latex()+
"\\right)").parent.blur():a.writeLatex(b+"\\left(\\right)").parent.blur(),a.moveLeft()});case "movecursor":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");if(a=(a=a&&r[a])&&a.cursor)"b"==b?a.backspace():(a.clearSelection().show(),"l"==b?a.moveLeft():"r"==b?a.moveRight():"u"==b?a.moveUp():"d"==b&&a.moveDown())});case "writefrac":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id");if(a=(a=a&&r[a])&&a.cursor)a.selection?
a.writeLatex("\\frac{"+a.selection.latex()+"}{}").parent.blur():(a.writeLatex("\\frac{}{}").parent.blur(),a.moveLeft()),a.moveLeft()});case "writeint":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id"),a=(a=a&&r[a])&&a.cursor;if("["==b)var e="\\left[",n="\\right]";else"("==b?(e="\\left(",n="\\right)"):(e=b+"{",n="}");a&&(a.selection?a.selection.latex().match(/,/)?a.writeLatex(e+a.selection.latex()+n).parent.blur():a.writeLatex(e+a.selection.latex()+","+n).parent.blur():
(a.writeLatex(e+","+n).parent.blur(),a.moveLeft()),a.moveLeft())});case "writebracket":if(1<arguments.length)return this.each(function(){var a=x(this).attr("mathquill-block-id"),a=(a=a&&r[a])&&a.cursor;if("["==b)var e="\\left[",n="\\right]";else"("==b?(e="\\left(",n="\\right)"):"|"==b&&(e="\\left|",n="\\right|");a&&(a.selection?a.writeLatex(e+a.selection.latex()+n).parent.blur():a.writeLatex(e+n).parent.blur(),a.moveLeft())});default:var n="textbox"===a,k=n||"editable"===a,g=n?ja:A;return this.each(function(){H(x(this),
g(),n,k)})}};B(function(){B(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");B(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");B(".mathquill-embedded-latex").mathquill()})})();var mqarea,mqmousebase;
$(function(){$(window).load(function(){mqarea=$(".mathquill-editable");$(".mathquill-rendered-math").mathquill("redraw");mqarea.find("input,textarea").focus();$("input,textarea").attr("autocapitalize","off");$("#mqee td.mqeebtn").bind("mouseover mouseup",function(){$(this).hasClass("mqeeactive")||$(this).addClass("mqeehighlight")}).bind("mousedown",function(){$(this).addClass("mqeeclick")}).bind("mouseout",function(){$(this).removeClass("mqeehighlight");$(this).removeClass("mqeeclick")}).bind("mouseup",
function(){$(this).removeClass("mqeeclick")}).bind("click",mqeeinsert);$("#mqeeclosebutton").bind("click",hideee);$("#mqeetopbar").mousedown(function(e){e.preventDefault&&e.preventDefault();$("body").addClass("unselectable");mqmousebase={left:e.pageX,top:e.pageY};$("body").bind("mousemove",mqeemousemove);$("body").mouseup(function(b){var e=$("#mqee").offset();lasteepos.left=e.left;lasteepos.top=e.top;$("body").unbind("mousemove",mqeemousemove);$("body").removeClass("unselectable");$(this).unbind(b)})});
$("#mqee td.mqeebtn").bind("touchstart",function(e){e.preventDefault&&e.preventDefault();$(this).addClass("mqeeclick")}).bind("touchend",function(e){e.preventDefault&&e.preventDefault();$(this).delay(500).removeClass("mqeeclick")}).bind("touchend",mqeeinsert);$("#mqeeclosebutton").bind("touchend",function(e){e.preventDefault&&e.preventDefault();hideee()});$("#mqeetopbar").bind("touchstart",function(e){e.preventDefault&&e.preventDefault();e=e.originalEvent.changedTouches[0]||e.originalEvent.touches[0];
mqmousebase={left:e.pageX,top:e.pageY};$("body").addClass("unselectable");$("body").bind("touchmove",mqeetouchmove);$("body").bind("touchend",function(b){var e=$("#mqee").offset();lasteepos.left=e.left;lasteepos.top=e.top;$("body").unbind("touchmove",mqeetouchmove);$("body").removeClass("unselectable");$(this).unbind(b)})})});$(document).ready(function(){$(".tab_content").hide();$("ul.tabs li").click(function(){$("ul.tabs li").removeClass("active");$(this).addClass("active");$(".tab_content").hide();
var e=$(this).find("a").attr("href");$(e).show();return!1})})});function mqPrepTabs(e,b){$(".tab_content").hide();$("ul.tabs li").removeClass("active").each(function(u,w){if(0==u){$(w).addClass("active").show();var H=$(w).find("a").attr("href");$(H).show()}else 1==u?$(w).hide():2==u?"int"==b?$(w).show():$(w).hide():3==u?"ineq"==b?$(w).show():$(w).hide():1==e?$(w).show():$(w).hide()})}
function mqeemousemove(e){$("#mqee").css("left",e.pageX-mqmousebase.left+lasteepos.left).css("top",e.pageY-mqmousebase.top+lasteepos.top);e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();return!1}
function mqeetouchmove(e){var b=e.originalEvent.changedTouches[0]||e.originalEvent.touches[0];$("#mqee").css("left",b.pageX-mqmousebase.left+lasteepos.left).css("top",b.pageY-mqmousebase.top+lasteepos.top);e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();return!1}
function mqeeinsert(e){e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e=$(this).attr("btntext");var b=$(this).attr("btntype");e=e.replace("\\\\","\\");0==b?mqarea.mathquill("cmd",e).find("input,textarea").focus():1==b?mqarea.mathquill("write",e).find("input,textarea").focus():2==b?mqarea.mathquill("writesimpfunc",e).find("input,textarea").focus():3==b?mqarea.mathquill("writefunc",e).find("input,textarea").focus():4==b?mqarea.mathquill("writeint",e).find("input,textarea").focus():
5==b?mqarea.mathquill("movecursor",e).find("input,textarea").focus():6==b?mqarea.mathquill("writebracket",e).find("input,textarea").focus():7==b&&mqarea.mathquill("writefrac",e).find("input,textarea").focus();return!1}var mqeeddclosetimer=null,cureedd=null,lasteepos=null;
function showeedd(e,b,u){mqeeddclosetimer&&(window.clearTimeout(mqeeddclosetimer),mqeeddclosetimer=null);hideee();cureedd={id:e,type:b,extras:u};b=$("#mqeedd");e=$("#"+e);u=e.offset();u.left+=e.outerWidth();b.css("left",u.left+"px").css("top",u.top+"px").height(e.outerHeight()-2).show()}function updateeeddpos(){if(cureedd){var e=$("#mqeedd"),b=$("#"+cureedd.id),u=b.offset();u.left+=b.outerWidth();e.css("left",u.left+"px").css("top",u.top+"px").height(b.outerHeight()-2).show()}}
function hideeedd(){mqeeddclosetimer=setTimeout(function(){$("#mqeedd").hide()},250)}function mqeetoggleactive(e){for(var b=1;5>=b;b++)e==b?($("#mqeetab"+b).addClass("mqeeactive").removeClass("mqeehighlight"),document.getElementById("mqee"+b).style.display=""):(document.getElementById("mqee"+b).style.display="none",$("#mqeetab"+b).removeClass("mqeeactive"));mqeeactivetab=e;mqarea.find("input,textarea").focus()}
function showee(){mqPrepTabs(cureedd.type-3,cureedd.extras);var e=$("#mqee");if(lasteepos){var b=$(window).scrollTop()-lasteepos.scroll;lasteepos.top+=b;lasteepos.scroll=$(window).scrollTop()}else lasteepos={left:($(window).width()-e.outerWidth())/2,top:$(window).scrollTop()+((window.innerHeight?window.innerHeight:$(window).height())-e.outerHeight())/2,scroll:$(window).scrollTop()};e.css("left",lasteepos.left).css("top",lasteepos.top).show();mqarea.mathquill("latex",AMtoMQ($("#"+cureedd.id).val()));
mqarea.find("input,textarea").focus()}function hideee(){$("#mqee").hide()}function savemathquill(){var e=MQtoAM(mqarea.mathquill("latex"));$("#"+cureedd.id).val(e);""!=e&&$("#"+cureedd.id).siblings("input[value=spec]").prop("checked",!0);(e=$("#pbtn"+cureedd.id.substr(2)))&&e.trigger("click");hideee()}var eebasiccurel=null,eebasicinit=!1,eebasicselstore=null,eebasicclosetimer=0,ddbasicclosetimer=0,cureebasicdd=null,eebasictype=0;
function eebasicinsert(e){el=document.getElementById(eebasiccurel);if(el.setSelectionRange)var b=el.selectionEnd-el.selectionStart;else if(document.selection&&document.selection.createRange){el.focus();var u=eebasicselstore,b=u.text.length}posshift=0;"("==e?(insb="(",insa=")",posshift=1):"sym"==e.substr(0,3)&&(insb="",insa=e.substr(3));el.setSelectionRange?(e=el.selectionEnd+insa.length+insb.length,el.value=el.value.substring(0,el.selectionStart)+insb+el.value.substring(el.selectionStart,el.selectionEnd)+
insa+el.value.substring(el.selectionEnd,el.value.length),el.focus(),0==b&&0<posshift&&(e-=posshift),el.setSelectionRange(e,e)):document.selection&&document.selection.createRange&&(u.text=insb+u.text+insa,0==b&&0<posshift&&u.move("character",-1*posshift),u.select());eebasicselstore=null}function showeebasicselstore(e){null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(e).focus(),eebasicselstore=document.selection.createRange())}
function showeebasic(e){el=document.getElementById(e);if(!el.setSelectionRange&&document.selection&&document.selection.createRange)var b=eebasicselstore;var u=document.getElementById("eebasic");if(0==eebasicinit){els=u.getElementsByTagName("td");for(var w=0;w<els.length;w++)els[w].onmouseover=eebasiccellhighlight,els[w].onmouseout=eebasiccellunhighlight,els[w].onmousedown=eebasiccellhighlightdown,els[w].onmouseup=eebasiccellhighlight;eebasicinit=!0}1==eebasictype?(document.getElementById("eenumber").style.display=
"none",document.getElementById("eeinterval").style.display=""):(document.getElementById("eenumber").style.display="",document.getElementById("eeinterval").style.display="none");e!=eebasiccurel?(eebasiccurel=e,p=findPos(el),u.style.top=p[1]+el.offsetHeight+"px",u.style.display="block",u.style.left=u.offsetWidth<el.offsetWidth?p[0]+el.offsetWidth+10-u.offsetWidth+"px":p[0]+"px"):(u.style.display="none",eebasiccurel=null);unhideebasice(0);el.setSelectionRange?el.focus():document.selection&&document.selection.createRange&&
b.select()}function unhideebasice(e){eebasiccancelclosetimer()}function hideebasice(e){null!=eebasiccurel&&(eebasicclosetimer=window.setTimeout(reallyhideebasice,250))}function hideebasicedd(){ddbasicclosetimer=window.setTimeout(function(){cureebasicdd=null;document.getElementById("eebasicdd").style.display="none"},250)}function reallyhideebasice(){document.getElementById("eebasic").style.display="none";eebasiccurel=null}
function eebasiccancelclosetimer(){eebasicclosetimer&&(window.clearTimeout(eebasicclosetimer),eebasicclosetimer=null)}function eebasiccellhighlight(){this.style.background="#ccf"}function eebasiccellunhighlight(){this.style.background="#fff"}function eebasiccellhighlightdown(){this.style.background="#99f";null==eebasicselstore&&document.selection&&document.selection.createRange&&(document.getElementById(eebasiccurel).focus(),eebasicselstore=document.selection.createRange())}
function showeebasicdd(e,b){eebasictype=b;ddbasicclosetimer&&(window.clearTimeout(ddbasicclosetimer),ddbasicclosetimer=null);var u=document.getElementById("eebasicdd"),w=document.getElementById(e);p=findPos(w);u.style.left=p[0]+w.offsetWidth+"px";u.style.top=p[1]+"px";u.style.height=w.offsetHeight-2+"px";u.style.lineHeight=w.offsetHeight+"px";u.style.width="10px";u.style.display="block";cureebasicdd=e}
var AMtoMQ=function(){function e(b,e){return b.input>e.input?1:-1}function b(b,e){var m;m="\\"==b.charAt(e)&&"\\"!=b.charAt(e+1)&&" "!=b.charAt(e+1)?b.slice(e+1):b.slice(e);for(var l=0;l<m.length&&32>=m.charCodeAt(l);l+=1);return m.slice(l)}function u(b){var e=0,m,l,r="";l=!0;for(var u=1;u<=b.length&&l;u++){l=b.slice(0,u);if(0==e){var w,C,e=-1;for(w=q.length;e+1<w;)C=e+w>>1,q[C]<l?e=C:w=C;e=w}else for(;e<q.length&&q[e]<l;e++);e<q.length&&b.slice(0,q[e].length)==q[e]&&(r=q[e],m=e,u=r.length);l=e<q.length&&
b.slice(0,q[e].length)>=q[e]}E=x;if(""!=r)return x=G[m].ttype,G[m];x=0;e=1;l=b.slice(0,1);for(m=!0;"0"<=l&&"9">=l&&e<=b.length;)l=b.slice(e,e+1),e++;if("."==l&&(l=b.slice(e,e+1),"0"<=l&&"9">=l))for(m=!1,e++;"0"<=l&&"9">=l&&e<=b.length;)l=b.slice(e,e+1),e++;m&&1<e||2<e?(l=b.slice(0,e-1),b="mn"):(l=b.slice(0,1),b=("A">l||"Z"<l)&&("a">l||"z"<l)?"mo":"mi");return"-"==l&&3==E?(x=3,{input:l,tag:b,output:l,ttype:1,func:!0,val:!0}):{input:l,tag:b,output:l,ttype:0,val:!0}}function w(b){var e;b=b.replace(/^\s\s*/,
"");e=/\s/;for(var m=b.length;e.test(b.charAt(--m)););b=b.slice(0,m+1);e=b.charAt(0);if("("==e||"["==e)b=b.substr(1);e=b.substr(0,6);if("\\left("==e||"\\left["==e||"\\left{"==e)b=b.substr(6);e=b.substr(0,12);if("\\left\\lbrace"==e||"\\left\\langle"==e)b=b.substr(12);e=b.charAt(b.length-1);if(")"==e||"]"==e||"."==e)b=b.substr(0,b.length-7);e=b.substr(b.length-7,7);if("\\rbrace"==e||"\\rangle"==e)b=b.substr(0,b.length-13);return b}function H(b){pre="boolean"==typeof b.val&&b.val?"":"\\";return null==
b.tex?pre+(""==pre?b.input:b.input.toLowerCase()):pre+b.tex}function M(b){return null==b.tex?b.input:"\\"+b.tex}function B(e){var k,m,l,r="";e=b(e,0);k=u(e);if(null==k||5==k.ttype&&0<L)return[null,e];8==k.ttype&&(e=k.output+b(e,k.input.length),k=u(e));switch(k.ttype){case 7:case 0:return e=b(e,k.input.length),m=H(k),m.charAt(0),[m,e];case 4:return L++,e=b(e,k.input.length),m=Q(e,!0),L--,"\\right"==m[0].substr(0,6)?("\\right."==m[0].substr(0,7)?m[0]=m[0].substr(7):m[0]=m[0].substr(6),e="boolean"==
typeof k.invisible&&k.invisible?m[0]:M(k)+m[0]):e="boolean"==typeof k.invisible&&k.invisible?"\\left."+m[0]:"("==k.input&&"]"==m[0].substr(m[0].length-1)?"\\intervalopenleft{"+m[0].substr(0,m[0].length-7)+"}":"["==k.input&&")"==m[0].substr(m[0].length-1)?"\\intervalopenright{"+m[0].substr(0,m[0].length-7)+"}":"<<"==k.input&&"rangle"==m[0].substr(m[0].length-6)?"\\langle{"+m[0].substr(0,m[0].length-7-6)+"}":"\\left"+M(k)+m[0],[e,m[1]];case 10:return k!=P&&(e=b(e,k.input.length)),m="{"==e.charAt(0)?
e.indexOf("}"):"("==e.charAt(0)?e.indexOf(")"):"["==e.charAt(0)?e.indexOf("]"):k==P?e.slice(1).indexOf('"')+1:0,-1==m&&(m=e.length),l=e.slice(1,m),r+="\\text{"+l+"}",e=b(e,m+1),[r,e];case 1:e=b(e,k.input.length);m=B(e);if(null==m[0])return[H(k),e];if("boolean"==typeof k.func&&k.func){l=e.charAt(0);if("^"==l||"_"==l||"/"==l||"|"==l||","==l)return[H(k),e];e="-"==k.input?"-"+m[0]:"abs"==k.input?"\\left|"+w(m[0])+"\\right|":H(k)+("("==l?"":" ")+m[0];return[e,m[1]]}m[0]=w(m[0]);return"sqrt"==k.input?["\\sqrt{"+
m[0]+"}",m[1]]:[H(k)+"{"+m[0]+"}",m[1]];case 2:e=b(e,k.input.length);m=B(e);if(null==m[0])return[H(k),e];m[0]=w(m[0]);l=B(m[1]);if(null==l[0])return[H(k),e];l[0]=w(l[0]);"color"==k.input&&(r="{\\color{"+m[0].replace(/[\{\}]/g,"")+"}"+l[0]+"}}");if("root"==k.input||"stackrel"==k.input)r="root"==k.input?"\\nthroot{"+m[0]+"}{"+l[0]+"}":H(k)+"{"+m[0]+"}{"+l[0]+"}";"frac"==k.input&&(r="\\frac{"+m[0]+"}{"+l[0]+"}");return[r,l[1]];case 3:return e=b(e,k.input.length),[k.output,e];case 6:return e=b(e,k.input.length),
["\\quad\\text{"+k.input+"}\\quad",e];case 9:return L++,e=b(e,k.input.length),m=Q(e,!1),L--,l=m[0].charAt(m[0].length-1),"|"==l?(e="\\left|"+m[0],[e,m[1]]):["\\mid",e];default:return e=b(e,k.input.length),[H(k),e]}}function U(e){var k,m,l;e=b(e,0);u(e);l=B(e);m=l[0];e=l[1];k=u(e);3==k.ttype&&"/"!=k.input&&(e=b(e,k.input.length),l=B(e),l[0]=null==l[0]?"{}":w(l[0]),e=l[1],"_"==k.input?(k=u(e),"^"==k.input?(e=b(e,k.input.length),k=B(e),k[0]=w(k[0]),e=k[1],m="{"+m+("_{"+l[0]+"}"),m+="^{"+k[0]+"}",m+=
"}"):m+="_{"+l[0]+"}"):m=m+"^{"+l[0]+"}");return[m+" ",e]}function Q(e,k){var m,l,r="",q=!1;do e=b(e,0),m=U(e),l=m[0],e=m[1],m=u(e),3==m.ttype&&"/"==m.input?(e=b(e,m.input.length),m=U(e),m[0]=null==m[0]?"{}":w(m[0]),e=m[1],l=w(l),l="\\frac{"+l+"}",l+="{"+m[0]+"}",r+=l,m=u(e)):void 0!=l&&(r+=l);while((5!=m.ttype&&(9!=m.ttype||k)||0==L)&&null!=m&&""!=m.output);if(5==m.ttype||9==m.ttype){var x=r.length;if(2<x&&"{"==r.charAt(0)&&0<r.indexOf(",")){var C=r.charAt(x-2);if(")"==C||"]"==C){var E=r.charAt(6);
if("("==E&&")"==C&&"}"!=m.output||"["==E&&"]"==C){var q="\\matrix{",A=[];A.push(0);var G=!0,B=0,D=[[0]],a=0,H=0;for(l=1;l<x-1;l++)r.charAt(l)==E&&B++,r.charAt(l)==C&&(B--,0==B&&","==r.charAt(l+2)&&"{"==r.charAt(l+3)&&(A.push(l+2),a=l+2,D[a]=[l+2])),"["!=r.charAt(l)&&"("!=r.charAt(l)||H++,"]"!=r.charAt(l)&&")"!=r.charAt(l)||H--,","==r.charAt(l)&&1==H&&D[a].push(l);A.push(x);x=-1;if(0==B&&0<A.length)for(l=0;l<A.length-1;l++){0<l&&(q+="\\\\");if(0==l)if(1==D[A[l]].length)B=[r.substr(A[l]+7,A[l+1]-A[l]-
15)];else{B=[r.substring(A[l]+7,D[A[l]][1])];for(C=2;C<D[A[l]].length;C++)B.push(r.substring(D[A[l]][C-1]+1,D[A[l]][C]));B.push(r.substring(D[A[l]][D[A[l]].length-1]+1,A[l+1]-8))}else if(1==D[A[l]].length)B=[r.substr(A[l]+8,A[l+1]-A[l]-16)];else{B=[r.substring(A[l]+8,D[A[l]][1])];for(C=2;C<D[A[l]].length;C++)B.push(r.substring(D[A[l]][C-1]+1,D[A[l]][C]));B.push(r.substring(D[A[l]][D[A[l]].length-1]+1,A[l+1]-8))}0<x&&B.length!=x?G=!1:-1==x&&(x=B.length);q+=B.join("&")}G&&(r=q+"}")}}}e=b(e,m.input.length);
"boolean"==typeof m.invisible&&m.invisible?r+="\\right.":(l="\\right"+M(m),r+=l);q=!0}0<L&&!q&&(r+="\\right.");return[r,e]}var P={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:10},G=[{input:"alpha",tag:"mi",output:"\u03b1",tex:null,ttype:0},{input:"beta",tag:"mi",output:"\u03b2",tex:null,ttype:0},{input:"chi",tag:"mi",output:"\u03c7",tex:null,ttype:0},{input:"delta",tag:"mi",output:"\u03b4",tex:null,ttype:0},{input:"Delta",tag:"mo",output:"\u0394",tex:null,ttype:0},{input:"epsi",tag:"mi",output:"\u03b5",
tex:"epsilon",ttype:0},{input:"varepsilon",tag:"mi",output:"\u025b",tex:null,ttype:0},{input:"eta",tag:"mi",output:"\u03b7",tex:null,ttype:0},{input:"gamma",tag:"mi",output:"\u03b3",tex:null,ttype:0},{input:"Gamma",tag:"mo",output:"\u0393",tex:null,ttype:0},{input:"iota",tag:"mi",output:"\u03b9",tex:null,ttype:0},{input:"kappa",tag:"mi",output:"\u03ba",tex:null,ttype:0},{input:"lambda",tag:"mi",output:"\u03bb",tex:null,ttype:0},{input:"Lambda",tag:"mo",output:"\u039b",tex:null,ttype:0},{input:"mu",
tag:"mi",output:"\u03bc",tex:null,ttype:0},{input:"nu",tag:"mi",output:"\u03bd",tex:null,ttype:0},{input:"omega",tag:"mi",output:"\u03c9",tex:null,ttype:0},{input:"Omega",tag:"mo",output:"\u03a9",tex:null,ttype:0},{input:"phi",tag:"mi",output:"\u03c6",tex:null,ttype:0},{input:"varphi",tag:"mi",output:"\u03d5",tex:null,ttype:0},{input:"Phi",tag:"mo",output:"\u03a6",tex:null,ttype:0},{input:"pi",tag:"mi",output:"\u03c0",tex:null,ttype:0},{input:"Pi",tag:"mo",output:"\u03a0",tex:null,ttype:0},{input:"psi",
tag:"mi",output:"\u03c8",tex:null,ttype:0},{input:"Psi",tag:"mi",output:"\u03a8",tex:null,ttype:0},{input:"rho",tag:"mi",output:"\u03c1",tex:null,ttype:0},{input:"sigma",tag:"mi",output:"\u03c3",tex:null,ttype:0},{input:"Sigma",tag:"mo",output:"\u03a3",tex:null,ttype:0},{input:"tau",tag:"mi",output:"\u03c4",tex:null,ttype:0},{input:"theta",tag:"mi",output:"\u03b8",tex:null,ttype:0},{input:"vartheta",tag:"mi",output:"\u03d1",tex:null,ttype:0},{input:"Theta",tag:"mo",output:"\u0398",tex:null,ttype:0},
{input:"upsilon",tag:"mi",output:"\u03c5",tex:null,ttype:0},{input:"xi",tag:"mi",output:"\u03be",tex:null,ttype:0},{input:"Xi",tag:"mo",output:"\u039e",tex:null,ttype:0},{input:"zeta",tag:"mi",output:"\u03b6",tex:null,ttype:0},{input:"*",tag:"mo",output:"\u22c5",tex:"cdot",ttype:0},{input:"xx",tag:"mo",output:"\u00d7",tex:"times",ttype:0},{input:"-:",tag:"mo",output:"\u00f7",tex:"div",ttype:0},{input:"uu",tag:"mo",output:"\u222a",tex:"cup",ttype:0},{input:"U",tag:"mo",output:"\u222a",tex:"cup",ttype:0},
{input:"sum",tag:"mo",output:"\u2211",tex:null,ttype:7},{input:"!=",tag:"mo",output:"\u2260",tex:"ne",ttype:0},{input:"lt",tag:"mo",output:"<",tex:null,ttype:0},{input:"gt",tag:"mo",output:">",tex:null,ttype:0},{input:"<=",tag:"mo",output:"\u2264",tex:"le",ttype:0},{input:"lt=",tag:"mo",output:"\u2264",tex:"leq",ttype:0},{input:"gt=",tag:"mo",output:"\u2265",tex:"geq",ttype:0},{input:">=",tag:"mo",output:"\u2265",tex:"ge",ttype:0},{input:"geq",tag:"mo",output:"\u2265",tex:null,ttype:0},{input:"in",
tag:"mo",output:"\u2208",tex:null,ttype:0},{input:"!in",tag:"mo",output:"\u2209",tex:"notin",ttype:0},{input:"sub",tag:"mo",output:"\u2282",tex:"subset",ttype:0},{input:"sup",tag:"mo",output:"\u2283",tex:"supset",ttype:0},{input:"sube",tag:"mo",output:"\u2286",tex:"subseteq",ttype:0},{input:"supe",tag:"mo",output:"\u2287",tex:"supseteq",ttype:0},{input:"(",tag:"mo",output:"(",tex:null,ttype:4},{input:")",tag:"mo",output:")",tex:null,ttype:5},{input:"[",tag:"mo",output:"[",tex:null,ttype:4},{input:"]",
tag:"mo",output:"]",tex:null,ttype:5},{input:"{",tag:"mo",output:"{",tex:"lbrace",ttype:4},{input:"}",tag:"mo",output:"}",tex:"rbrace",ttype:5},{input:"|",tag:"mo",output:"|",tex:null,ttype:9},{input:"(:",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:":)",tag:"mo",output:"\u232a",tex:"rangle",ttype:5},{input:"<<",tag:"mo",output:"\u2329",tex:"langle",ttype:4},{input:">>",tag:"mo",output:"\u232a",tex:"rangle",ttype:5},{input:"int",tag:"mo",output:"\u222b",tex:null,ttype:0},{input:"+-",tag:"mo",
output:"\u00b1",tex:"pm",ttype:0},{input:"O/",tag:"mo",output:"\u2205",tex:"emptyset",ttype:0},{input:"oo",tag:"mo",output:"\u221e",tex:"infty",ttype:0},{input:"del",tag:"mo",output:"\u2202",tex:"partial",ttype:0},{input:"grad",tag:"mo",output:"\u2207",tex:"nabla",ttype:0},{input:"RR",tag:"mo",output:"\u211d",tex:"real",ttype:0},{input:"f",tag:"mi",output:"f",tex:null,ttype:1,func:!0,val:!0},{input:"lim",tag:"mo",output:"lim",tex:null,ttype:7},{input:"Lim",tag:"mo",output:"Lim",tex:null,ttype:7},
{input:"sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"arcsin",tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:1,
func:!0},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"coth",tag:"mo",output:"coth",tex:null,ttype:1,func:!0},{input:"sech",tag:"mo",output:"sech",tex:null,ttype:1,func:!0},{input:"csch",tag:"mo",output:"csch",tex:null,ttype:1,func:!0},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},
{input:"ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"abs",tag:"mo",output:"abs",tex:null,ttype:1,func:!0},{input:"Sin",tag:"mo",output:"sin",tex:null,ttype:1,func:!0},{input:"Cos",tag:"mo",output:"cos",tex:null,ttype:1,func:!0},{input:"Tan",tag:"mo",output:"tan",tex:null,ttype:1,func:!0},{input:"Arcsin",tag:"mo",output:"arcsin",tex:null,ttype:1,func:!0},{input:"Arccos",tag:"mo",output:"arccos",tex:null,ttype:1,func:!0},{input:"Arctan",tag:"mo",output:"arctan",tex:null,ttype:1,func:!0},
{input:"Sinh",tag:"mo",output:"sinh",tex:null,ttype:1,func:!0},{input:"Sosh",tag:"mo",output:"cosh",tex:null,ttype:1,func:!0},{input:"Tanh",tag:"mo",output:"tanh",tex:null,ttype:1,func:!0},{input:"Cot",tag:"mo",output:"cot",tex:null,ttype:1,func:!0},{input:"Sec",tag:"mo",output:"sec",tex:null,ttype:1,func:!0},{input:"Csc",tag:"mo",output:"csc",tex:null,ttype:1,func:!0},{input:"Log",tag:"mo",output:"log",tex:null,ttype:1,func:!0},{input:"Ln",tag:"mo",output:"ln",tex:null,ttype:1,func:!0},{input:"Abs",
tag:"mo",output:"abs",tex:null,ttype:1,func:!0},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"root",tag:"mroot",output:"root",tex:null,ttype:2},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:2},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:3},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,ttype:2},{input:"_",tag:"msub",output:"_",tex:null,ttype:3},{input:"^",tag:"msup",output:"^",tex:null,ttype:3},{input:"Sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:1},{input:"bar",
tag:"mover",output:"\u00af",tex:"overline",ttype:1,acc:!0},{input:"vec",tag:"mover",output:"\u2192",tex:null,ttype:1,acc:!0},{input:"text",tag:"mtext",output:"text",tex:null,ttype:10},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:10},P],q=[],L,E,x;(function(){var b=[],k;for(k=0;k<G.length;k++)"undefined"==typeof G[k].tex||null==G[k].tex||"boolean"==typeof G[k].notexcopy&&G[k].notexcopy||(b[b.length]={input:G[k].tex,tag:G[k].tag,output:G[k].output,ttype:G[k].ttype});G=G.concat(b);G.sort(e);
for(k=0;k<G.length;k++)q[k]=G[k].input})();return function(b){L=0;b=b.replace(/(&nbsp;|\u00a0|&#160;)/g,"");b=b.replace(/^\s*<(.*?)>\s*$/,"<<$1>>");b=b.replace(/&gt;/g,">");b=b.replace(/&lt;/g,"<");b=b.replace(/\s*\bor\b\s*/g,'" or "');b=b.replace(/all\s+real\s+numbers/g,'"all real numbers"');return null==b.match(/\S/)?"":Q(b.replace(/^\s+/g,""),!1)[0]}}();
function MQtoAM(e){for(e=e.replace(/\\:/g," ");-1!=(i=e.indexOf("\\left|"));){nested=0;do lb=e.indexOf("\\left|",i+1),rb=e.indexOf("\\right|",i+1),-1!=lb&&lb<rb?nested++:-1!=rb&&(-1==lb||rb<lb)&&nested--;while(0<nested&&-1!=rb);-1!=rb?(e=e.substring(0,rb)+")"+e.substring(rb+7),e=e.substring(0,i)+"abs("+e.substring(i+6)):e=e.substring(0,i)+"|"+e.substring(i+6)}e=e.replace(/\\text{\s*or\s*}/g," or ");e=e.replace(/\\text{all\s+real\s+numbers}/g,"all real numbers");e=e.replace(/\\Re/g,"RR");e=e.replace(/\\le(?!f)/g,
"<=");e=e.replace(/\\ge/g,">=");e=e.replace(/\\cup/g,"U");e=e.replace(/\\left/g,"");e=e.replace(/\\right/g,"");e=e.replace(/\\langle/g,"<");e=e.replace(/\\rangle/g,">");e=e.replace(/\\pm/g,"+-");e=e.replace(/\\cdot/g,"*");e=e.replace(/\\infty/g,"oo");e=e.replace(/\\nthroot/g,"root");e=e.replace(/\\varnothing/g,"DNE");e=e.replace(/\\overline/g,"bar");e=e.replace(/\\nabla/g,"grad");e=e.replace(/\\partial/g,"del");e=e.replace(/\\/g,"");e=e.replace(/sqrt\[(.*?)\]/g,"root($1)");for(e=e.replace(/(\d)frac/g,
"$1 frac");-1!=(i=e.indexOf("frac{"));){nested=1;for(curpos=i+5;0<nested&&curpos<e.length-1;)curpos++,c=e.charAt(curpos),"{"==c?nested++:"}"==c&&nested--;e=0==nested?e.substring(0,i)+"("+e.substring(i+5,curpos)+")/"+e.substring(curpos+1):e.substring(0,i)+e.substring(i+4)}e=e.replace(/_(\w)/g,"_$1 ");e=e.replace(/_{([\d\.]+)}/g,"_$1");e=e.replace(/{/g,"(");e=e.replace(/}/g,")");e=e.replace(/\(([\d\.]+)\)\/\(([\d\.]+)\)/g,"$1/$2");e=e.replace(/\/\(([\d\.]+)\)/g,"/$1");e=e.replace(/\(([\d\.]+)\)\//g,
"$1/");e=e.replace(/\/\(([\a-zA-Z])\)/g,"/$1");e=e.replace(/\(([\a-zA-Z])\)\//g,"$1/");e=e.replace(/\^\(-1\)/g,"^-1");return e=e.replace(/\^\((-?[\d\.]+)\)/g,"^$1")};
